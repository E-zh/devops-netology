# devops-netology

### Желобанов Егор DEVOPS-21

# Домашнее задание к занятию 13.5 «Troubleshooting»

### Цель задания

Устранить неисправности при деплое приложения.

### Чеклист готовности к домашнему заданию

1. Кластер K8s.

### Задание. При деплое приложение web-consumer не может подключиться к auth-db. Необходимо это исправить

1. Установить приложение по команде:
```shell
kubectl apply -f https://raw.githubusercontent.com/netology-code/kuber-homeworks/main/3.5/files/task.yaml
```
2. Выявить проблему и описать.
3. Исправить проблему, описать, что сделано.
4. Продемонстрировать, что проблема решена.

---
### Ответ:
1. Задание выполняется на кластере kubernetes, размещенном в Yandex.Cloud и состоящим из 3-х нод:  
    ![](/pics/13.5/yc-all-vms.jpg)  
    И результат команды с мастер-ноды `kubectl get nodes -o wide`:  
    ![](/pics/13.5/get-nodes.jpg)  
2. При установке приложения по вышеуказанной команде, сразу получил ошибку из-за отсутствующих namespace. Создал нужные, установил приложение повторно:  
    ![](/pics/13.5/error-apply-deployments.jpg)  
    Результат выполнения команды `kubectl get deployments -A -o wide`:  
    ![](/pics/13.5/get-deployments.jpg)  
3. Проверяем доступность приложения `auth-db` из приложения `web-consumer`:
    * Определяем ip-адреса наших приложений/подов:  
    ![](/pics/13.5/get-pods.jpg)  
    * сейчас нас интересуют адреса подов приложения `web-consumer`. Заходим в первый под `web-consumer-84fc79d94d-bqvq8` с адресом 10.38.0.1, и пробуем оттуда сначала пинговать `auth-db` по адресу 10.38.0.2. Как видим приложение доступно:  
    ![](/pics/13.5/pod1-to-auth-db.jpg)  
    * далее заходим во второй под приложения `web-consumer`, и совершаем все те же самые операции:  
    ![](/pics/13.5/pod2-to-auth-db.jpg)  
    * как видим из скриншотов выше, приложение `auth-db` полностью доступно из приложения `web-consumer`.
4. В данном случае вся проблема была в отсутствующих namespace `web` и `data` при деплое приложений.

### Правила приёма работы

1. Домашняя работа оформляется в своём Git-репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.
2. Файл README.md должен содержать скриншоты вывода необходимых команд, а также скриншоты результатов.
3. Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md.
